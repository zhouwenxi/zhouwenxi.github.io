<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="utils,">










<meta name="description" content="使用方式(最低api为17)1、Add it in your root build.gradle at the end of repositories:  allprojects {         repositories {             maven { url &amp;apos;https://jitpack.io&amp;apos; }         }     }  2、Add the d">
<meta name="keywords" content="utils">
<meta property="og:type" content="article">
<meta property="og:title" content="ZUtils工具框架开发记录">
<meta property="og:url" content="http://yoursite.com/2019/01/05/ZUtils工具框架开发记录/index.html">
<meta property="og:site_name" content="Zhou">
<meta property="og:description" content="使用方式(最低api为17)1、Add it in your root build.gradle at the end of repositories:  allprojects {         repositories {             maven { url &amp;apos;https://jitpack.io&amp;apos; }         }     }  2、Add the d">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-24T05:50:38.098Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZUtils工具框架开发记录">
<meta name="twitter:description" content="使用方式(最低api为17)1、Add it in your root build.gradle at the end of repositories:  allprojects {         repositories {             maven { url &amp;apos;https://jitpack.io&amp;apos; }         }     }  2、Add the d">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":5,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/01/05/ZUtils工具框架开发记录/">





  <title>ZUtils工具框架开发记录 | Zhou</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zhou</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Android工程师</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-hao123">
          <a href="/hao123/" rel="section">
            
            导航
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-links">
          <a href="/links/" rel="section">
            
            留言板
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/05/ZUtils工具框架开发记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="七水">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qishui.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhou">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ZUtils工具框架开发记录</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-05T00:00:00+08:00">
                2019-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/01/05/ZUtils工具框架开发记录/" class="leancloud_visitors" data-flag-title="ZUtils工具框架开发记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="使用方式-最低api为17"><a href="#使用方式-最低api为17" class="headerlink" title="使用方式(最低api为17)"></a>使用方式(最低api为17)</h2><pre><code>1、Add it in your root build.gradle at the end of repositories:

allprojects {
        repositories {
            maven { url &apos;https://jitpack.io&apos; }
        }
    }

2、Add the dependency

dependencies {
    api &apos;com.github.zhouwenxi:ZUtils:1.1.0&apos;
}

3、注册BaseQiShuiApplication或则实现BaseQiShuiApplication初始化方法
</code></pre><a id="more"></a>
<h2 id="请求权限-permisssion"><a href="#请求权限-permisssion" class="headerlink" title="请求权限 permisssion"></a>请求权限 permisssion</h2><p>1、Activity、Fragment请求权限及拒绝回调处理</p>
<pre><code>PermissionUtils.with(this)
            .addPermissions(PermissionUtils.GROUP_STORAGE)
            .addPermissions(PermissionUtils.GROUP_CAMERA)
            .addPermissions(PermissionUtils.GROUP_LOCATION)
            .request()
            .setCallback(new PermissionUtils.Callback() {
                @Override
                public void refuse() {
                    PermissionUtils.goSetInfo(MainActivity.this, PermissionUtils.getPermission(), 
                    new PermissionUtils.SetCallback() {
                        @Override
                        public void onclikCancle() {
                            Toast.makeText(MainActivity.this, &quot;cancel&quot;, Toast.LENGTH_SHORT).show();
                        }
                    });
                }
            });
</code></pre><h2 id="各种对话提示框框-dialog"><a href="#各种对话提示框框-dialog" class="headerlink" title="各种对话提示框框 dialog"></a>各种对话提示框框 dialog</h2><p>1、CommonDialog提示框 两种风格 STYLE_IOS、STYLE_ANDROID</p>
<pre><code>CommonDialog.with(this, CommonDialog.STYLE_IOS)
          .setDialogTitle(&quot;你是否需要添加?&quot;)
          .setDialogLeftText(&quot;不了&quot;)
          .setDialogRightText(&quot;好的&quot;)
          .setCallBack(new CommonDialog.CallBack() {
            @Override
            public void left() {

                Toast.makeText(MainActivity.this, &quot;left&quot;, Toast.LENGTH_SHORT).show();
            }

            @Override
            public void right() {

                Toast.makeText(MainActivity.this, &quot;right&quot;, Toast.LENGTH_SHORT).show();
            }
        }).showDialog();
</code></pre><p>2、加载框 设置请求文字</p>
<pre><code>LoadingDialog.with(this).setText(&quot;请求中&quot;).showDialog();
</code></pre><p>3、ListDialog 列表对话框</p>
<pre><code>List&lt;Bean&gt; list=new ArrayList&lt;Bean&gt;();
list.add(new Bean(&quot;0x1233&quot;,&quot;hello world 0&quot;,&quot;江西&quot;));
list.add(new Bean(&quot;0x1234&quot;,&quot;hello world 1&quot;,&quot;北京&quot;));
list.add(new Bean(&quot;0x1235&quot;,&quot;hello world 2&quot;,&quot;上海&quot;));

new ListDialog&lt;Bean&gt;(this).setDialogLv(list)
    .setCallback(new ListDialog.CallBack&lt;Bean&gt;() {
    @Override
    public void disPlay(Bean bean, int position) {

        Toast.makeText(MainActivity.this, bean.getCode(), Toast.LENGTH_SHORT).show();
    }
}).showDialog();
</code></pre><p>加载显示Bean 需要继承QiShuiDialogBean并设置showName字段</p>
<pre><code>public class Bean  extends QiShuiDialogBean {

    private String code;
    private String msg;
    private String displayCity;

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getMsg() {
        return msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    public String getDisplayCity() {
        return displayCity;
    }


    public void setDisplayCity(String displayCity) {
        this.displayCity = displayCity;
        this.showName=displayCity;
    }

    public Bean(String code, String msg, String displayCity) {

        this.code = code;
        this.msg = msg;
        this.displayCity = displayCity;
        this.showName=displayCity;

    }
}
</code></pre><p>4、分享、支付、拍照片等底部弹出框(2019年2月1日 17点37分 添加)</p>
<p>实现方式一</p>
<pre><code>BottomDialogFragment.with(R.layout.dialog_frgment_share)
  .setCallBack(new BottomDialogFragment.CallBack() {
                    @Override
                    public void handle(View view) {

                        view.setOnClickListener(new View.OnClickListener() {
                            @Override
                            public void onClick(View v) {
                                toast(&quot;Hello world &quot;);
                                BottomDialogFragment.getInstance().dismissDialog();
                            }
                        });
                    }
                }).showDialog(MainActivity.this);
</code></pre><p>实现方式二</p>
<pre><code>BottomDialog.with(MainActivity.this, R.layout.dialog_frgment_share)
      .setCallBack(new BottomDialog.CallBack() {
                    @Override
                    public void handle(View view) {

                        view.findViewById(R.id.tv_bottom_sheet_heading)
                        .setOnClickListener(new View.OnClickListener() {
                            @Override
                            public void onClick(View v) {
                                toast(&quot;TTTTTTTTTTTTTtt&quot;);
                                BottomDialog.getInstance().dismissDialog();
                            }
                        });

                    }
                }).showDialog();
</code></pre><h2 id="PopupWindow"><a href="#PopupWindow" class="headerlink" title="PopupWindow"></a>PopupWindow</h2><p>1、实现PopupWindow，控制设置显示view位置及透明度、动画、处理事件回调等</p>
<pre><code>PopupUtils.with(MainActivity.this)
         .setTargetView(hv.getRightIv())
         .setContentView(R.layout.popup_share)
         .setBackGroundLevel(0.8f)
         .setAnimationStyle(R.style.popup_bottom_left)
         .setCallBack(new PopupUtils.CallBack() {
             @Override
             public void handle(final PopupWindow popupWindow, View view) {

                 view.setOnClickListener(new View.OnClickListener() {
                     @Override
                     public void onClick(View v) {

                         toast(&quot;eee&quot;);
                         popupWindow.dismiss();
                     }
                 });
         }
     })
     .show(PopupUtils.Position.bottom_left);
</code></pre><p>2.实现位置有在控件上方、下方、左边、右边、下左、下右、上左、上右</p>
<pre><code>public enum Position {
    top,
    bottom,
    left,
    right,
    bottom_left,
    bootom_right,
    top_left,
    top_right
}
</code></pre><p>注释：更新时间 2019年2月11日13:33:57</p>
<h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><h2 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h2><p>1、存数据【本地SD卡及内存使用LRU算法】,对于不同类型，如bitmap或者Object key可以一样，不会覆盖</p>
<pre><code>String key1 = &quot;xxx&quot;;
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher);
CacheManager.with().putBitmap(key1, bitmap);

String key2 = &quot;yyyy&quot;;
CacheManager.with().putObject(key2, &quot;11111&quot;);
</code></pre><p>2、取数据</p>
<pre><code>Bitmap bitmap1 = CacheManager.with().getBitmap(key1);
String object = (String) CacheManager.with().getObject(key2);
</code></pre><p>3、清除数据【默认SD大于100MB自动删除SD缓存数据】</p>
<pre><code>CacheManager.with().clean();
</code></pre><h2 id="ActivtyResultUtils-处理onActivityResult方法"><a href="#ActivtyResultUtils-处理onActivityResult方法" class="headerlink" title="ActivtyResultUtils 处理onActivityResult方法"></a>ActivtyResultUtils 处理onActivityResult方法</h2><pre><code>int requestCode=123;
ActivtyResultUtils.with(this).startForResult(QiShuiSeeBigPictureActivity.class, requestCode, 
  new ActivtyResultUtils.Callback() {
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {

    }
});
</code></pre><h2 id="TakePictureUtils-拍照及选取相册图片"><a href="#TakePictureUtils-拍照及选取相册图片" class="headerlink" title="TakePictureUtils 拍照及选取相册图片"></a>TakePictureUtils 拍照及选取相册图片</h2><p>1、默认路径及名字【拍照】</p>
<pre><code>TakePictureUtils.with(this).takePicture(new TakePictureUtils.TakePictureCallback() {
    @Override
    public void show(String path) {

    }
});
</code></pre><p>2、自定义路径及名字【拍照】</p>
<pre><code>String picPath=&quot;sdcard/xxx&quot;;
String picName=&quot;yyy.jpg&quot;;
TakePictureUtils.with(this).takePicture(picPath,picName,new TakePictureUtils.TakePictureCallback() {
    @Override
    public void show(String path) {

    }
});
</code></pre><p>3、选区相册图片</p>
<pre><code>TakePictureUtils.with(this).selectPicture(new TakePictureUtils.SelectPictureCallBack() {
    @Override
    public void show(String path) {

    }
});
</code></pre><h2 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h2><p>使用用例</p>
<p>1、QiShuiMVPContract 所有要实现的UI及数据加载及逻辑约束控制类</p>
<pre><code>public class QiShuiMVPContract {

    interface ILoginView extends MvpBaseView{

        /**
         * 提示信息
         * @param message
         */
        void show(String message);

        /**
         * 设置加载进度条
         * @param text
         */
        void loadingDialog(String text);

        /**
         * 关闭进度条
         */
        void dissmissDialog();

        /**
         * 页面跳转
         */
        void nextPage();
    }

    // m p 一般是相对应的，排除同一个请求使用不同参数

    interface ILoginModel extends MvpBaseModel {

        /**
         * 进行联网操作 登录
         * @param url
         * @param map
         * @param callBack
         */
        void requestLogin(String url, HashMap&lt;String,Object&gt; map, ICallBack callBack);
    }

    interface IPresenter {

        /**
         * 请求登录
         * @param userName
         * @param password
         */
        void login(String userName,String password);

    }

}
</code></pre><p>2、QiShuiLoginModel 数据操作类</p>
<pre><code>public class QiShuiLoginModel implements QiShuiMVPContract.ILoginModel {

    @Override
    public void requestLogin(String url, HashMap&lt;String, Object&gt; map, ICallBack callBack) {
        /**
         * 实际请求网络
         */
        HttpManager.with().getProxy().get(url,map,callBack);
    }
}
</code></pre><p>3、QiShuiLoginPresenter业务处理</p>
<pre><code>public class QiShuiLoginPresenter
extends MvpBasePresenter&lt;QiShuiMVPContract.ILoginView,QiShuiLoginModel&gt; implements
QiShuiMVPContract.IPresenter{

    public QiShuiLoginPresenter(QiShuiLoginModel qiShuiLoginModel) {
        super(qiShuiLoginModel);
    }

    @Override
    public void login(final String userName, final String password) {

        if(isAttachView()){
            if(TextUtils.isEmpty(userName)){
                getView().show(&quot;用户名不能为空!&quot;);
                return;
            }
            if(TextUtils.isEmpty(password)){
                getView().show(&quot;密码不能为空!&quot;);
                return;
            }
            getView().loadingDialog(&quot;正在登录中...&quot;);
        }

        String url=&quot;https://www.baidu.com&quot;;
        HashMap&lt;String, Object&gt; map=new HashMap&lt;&gt;();
        map.put(&quot;username&quot;,userName);
        map.put(&quot;password&quot;,password);
        getModel().requestLogin(url, map, new StringCallBack() {
            @Override
            protected void onEasySuccess(String result) {

                //提示登录成功，及发生跳转
                if(isAttachView()){
                    getView().show(userName+&quot;_&quot;+result);
                    getView().nextPage();
                }

            }

            @Override
            protected void onEasyError(String message) {

                //提示错误信息
                if(isAttachView()){
                    getView().show(userName+&quot;_&quot;+message);
                }

            }

            @Override
            public void onLast() {
                //关闭进度条
                if(isAttachView()){
                    getView().dissmissDialog();
                }
            }
        });


    }
}
</code></pre><p>4、页面转移 MVP 使用实例 login</p>
<pre><code>public class QiShuiLoginActivity
extends MvpBaseActivity&lt;QiShuiMVPContract.ILoginView, QiShuiLoginModel, QiShuiLoginPresenter&gt;
implements QiShuiMVPContract.ILoginView {

    private EditText etName;
    private EditText etPassword;

    @Override
    protected QiShuiLoginPresenter createPresenter() {
        return new QiShuiLoginPresenter(new QiShuiLoginModel());
    }

    @Override
    protected int initLayout() {
        return R.layout.activity_qi_shui_login;
    }

    @Override
    protected void initEvent(Bundle savedInstanceState) {

        bindView();
        login();
    }

    private void bindView() {
        etName = findViewById(R.id.qishui_login_et_name);
        etPassword = findViewById(R.id.qishui_login_et_password);
    }

    /**
     * 登录
     */
    public void login() {
        findViewById(R.id.qishui_login_btn)
        .setOnClickListener(new QiShuiClick(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (getPresenter() != null) {
                    getPresenter().login(getText(etName), getText(etPassword));
                }
            }
        }));
    }

    @Override
    public void show(String message) {
        toast(message);
    }

    @Override
    public void loadingDialog(String text) {
        LoadingDialog.with(this).setText(text).showDialog();
    }

    @Override
    public void dissmissDialog() {
        LoadingDialog.with(this).dismissDialog();
    }

    @Override
    public void nextPage() {
         startActivity(QiShuiMainStyle01Activity.class);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        LoadingDialog.with(this).dismissDialog();
    }
}
</code></pre><p>MVP总结 2019年1月4日16:33:19</p>
<pre><code>把要在Activity要处理的，以view分割处理事件，model获取数据 转移到presenter里面处理。

详情参见源码，关于基类mvp封装、网络部分封装。
</code></pre><h2 id="OnClickListener"><a href="#OnClickListener" class="headerlink" title="OnClickListener"></a>OnClickListener</h2><p>防止按钮快速点击,默认1s之外</p>
<pre><code>view.setOnClickListener(new QiShuiClick(new View.OnClickListener() {
    @Override
    public void onClick(View v) {

    }
}));
</code></pre><h2 id="annotation"><a href="#annotation" class="headerlink" title="annotation"></a>annotation</h2><p>1、QBindView、QBindOnclick 可用在activity或者fragment,需要继承基类或则单独初始化。</p>
<pre><code>public class MainFragment extends BaseQiShuiFragment {

    @QBindView(R.id.fragment_tv1)
    TextView tv;
    @QBindView(R.id.fragment_tv2)
    TextView tv2;


    @Override
    protected int initLayout() {
        return R.layout.fragment_main_test;
    }

    @Override
    protected void initEvent(Bundle savedInstanceState) {

        tv.setText(&quot;Hello&quot;);
        tv2.setText(&quot;world&quot;);

    }

    @QBindOnclick({R.id.fragment_tv1, R.id.fragment_tv2})
    void test(View view) {
        if (view.getId() == R.id.fragment_tv1) {
            toast(&quot;!!!!!!!!!!!!!!!!!!!!&quot;);
        }

        if (view.getId() == R.id.fragment_tv2) {
            toast(&quot;222222222222222&quot;);
        }
    }
}
</code></pre><p>静态加载fragment</p>
<pre><code>&lt;fragment
android:name=&quot;com.qishui.zutils.MainFragment&quot;
android:id=&quot;@+id/fragment1&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;match_parent&quot; /&gt;
</code></pre><h2 id="页面布局切换-state"><a href="#页面布局切换-state" class="headerlink" title="页面布局切换 state"></a>页面布局切换 state</h2><p>1、设置属性,可以自定义加载视图(加载中、加载失败、网络出错、数据为空),可以设置默认视图背景颜色、文字提示、图片资源、监听回调视图等。</p>
<p>注释:当处于fragment根目录，需要继承BaseQiShuiFragment或则在控件外面包裹一层布局即可。</p>
<p>ll 为要显示状态变化的viewGroup控件</p>
<pre><code>layoutManager = StateLayoutManager
            .with(ll)
            .setLoadingColor(0xffFF4081)
            .setNetErrorColor(0xffFF4081);
</code></pre><p>调用</p>
<pre><code>//加载中
stateLayoutManager.showLoading();   

//处理视图为空，并回调处理
stateLayoutManager.setCallBack(new StateLayoutManager.CallBack() {
            @Override
            public void handle(View view) {
                view.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                    }
                });
            }
        }).showDataEmpty();

//网络错误
layoutManager.showNetworkError();

//数据加载错误
layoutManager.showDataError();

//加载原来视图
layoutManager.showContent();
</code></pre><h2 id="主页面框架"><a href="#主页面框架" class="headerlink" title="主页面框架"></a>主页面框架</h2><p>更新时间 2019年1月12日 14点17分</p>
<p>1、TabLayout + Fragment 实现主页框架QiShuiMainStyle01Activity.class</p>
<pre><code>// 提供自定义的布局添加Tab
       for (int i = 0; i &lt; mFragmensts.length; i++) {
           TabLayout.Tab tab = mTabLayout.newTab();
           tab.setCustomView(DataGenerator.getTabView(0, i));
           LinearLayout layout = tab.view;
           layout.setBackgroundColor(UiUtils.getColor(R.color.colorWhite));
           mTabLayout.addTab(tab);
       }
</code></pre><p>2、BottomNavigationView + Fragment 实现主页框架QiShuiMainStyle02Activity.class</p>
<pre><code>&lt;android.support.design.widget.BottomNavigationView
       android:background=&quot;@color/colorWhite&quot;
       android:id=&quot;@+id/bottom_navigation_view&quot;
       android:layout_width=&quot;match_parent&quot;
       android:layout_height=&quot;wrap_content&quot;
       app:itemBackground=&quot;@color/colorWhite&quot;
       app:labelVisibilityMode=&quot;labeled&quot;
       app:elevation=&quot;2dp&quot;
       app:itemTextColor=&quot;@android:color/black&quot;
       app:itemIconTint=&quot;@android:color/black&quot;
       app:menu=&quot;@menu/navigation_menu&quot;
       /&gt;
</code></pre><p>3、RadioGroup + RadioButton + Fragment 实现主页框架QiShuiMainStyle03Activity.class</p>
<pre><code>子view是否裁剪 android:clipChildren=&quot;false&quot;

    &lt;!--主页rg样式--&gt;
    &lt;style name=&quot;RadioGroupButtonStyle&quot; &gt;
        &lt;!-- 这个属性是去掉button 默认样式--&gt;
        &lt;item name=&quot;android:button&quot;&gt;@null&lt;/item&gt;
        &lt;item name=&quot;android:background&quot;&gt;&quot;@color/colorTransparent&lt;/item&gt;
        &lt;item name=&quot;android:gravity&quot;&gt;center&lt;/item&gt;
        &lt;item name=&quot;android:layout_width&quot;&gt;0dp&lt;/item&gt;
        &lt;item name=&quot;android:layout_height&quot;&gt;wrap_content&lt;/item&gt;
        &lt;item name=&quot;android:layout_weight&quot;&gt;1&lt;/item&gt;
        &lt;item name=&quot;android:textSize&quot;&gt;12sp&lt;/item&gt;
        &lt;item name=&quot;android:textColor&quot;&gt;@drawable/color_selector&lt;/item&gt;
    &lt;/style&gt;
</code></pre><p>4、自定义CustomTabView实现主页面框架QiShuiMainStyle04Activity.class</p>
<pre><code>  &lt;com.qishui.commontoolslibrary.view.CustomTabView
       android:id=&quot;@+id/custom_tab_container&quot;
       android:layout_width=&quot;match_parent&quot;
       android:layout_height=&quot;55dp&quot;
       android:gravity=&quot;center&quot;/&gt;


customTabView = findViewById(R.id.custom_tab_container);
       customTabView.addTabView(R.layout.view_custom, 4)
       .setOnTabCheckListener(new CustomTabView.OnTabCheckListener() {

           @Override
           public void onSetTabAttrs(List&lt;View&gt; mTabViews) {
               for (int position = 0; position &lt; mTabViews.size(); position++) {
                   TextView textView = mTabViews.get(position).findViewById(R.id.custom_tv);
                   textView.setText(mTabTitle[position]);
               }
           }

           @Override
           public void onTabSelected(View view, int position) {

               TextView textView = view.findViewById(R.id.custom_tv);
               ImageView iv = view.findViewById(R.id.custom_iv);
               textView.setTextColor(Color.RED);
               iv.setImageResource(R.drawable.ic_tab_strip_icon_feed_selected);
               toast(mTabTitle[position]);
           }

           @Override
           public void onTabUnSelected(View view, int position) {

               TextView textView = view.findViewById(R.id.custom_tv);
               ImageView iv = view.findViewById(R.id.custom_iv);
               textView.setTextColor(Color.BLUE);
               iv.setImageResource(R.drawable.ic_tab_strip_icon_feed);
           }
       }).setCurrentItem(0);
</code></pre><p>实现view</p>
<pre><code>public class CustomTabView extends LinearLayout {

    /**
     * 保存TabView
     */
    private List&lt;View&gt; mTabViews;
    private ArrayList&lt;Integer&gt; mHistoryPosition;


    /**
     * 点击回调
     */
    private OnTabCheckListener mOnTabCheckListener;

    public interface OnTabCheckListener {

        /**
         * 设置属性
         *
         * @param mTabViews
         */
        void onSetTabAttrs(List&lt;View&gt; mTabViews);

        /**
         * 选中
         *
         * @param view
         * @param position
         */
        void onTabSelected(View view, int position);

        /**
         * 未选择
         *
         * @param view
         * @param position
         */
        void onTabUnSelected(View view, int position);
    }

    public CustomTabView setOnTabCheckListener(OnTabCheckListener onTabCheckListener) {
        mOnTabCheckListener = onTabCheckListener;
        return this;
    }

    public CustomTabView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
        setOrientation(HORIZONTAL);
        setGravity(Gravity.CENTER);
        mTabViews = new ArrayList&lt;&gt;();
        mHistoryPosition = new ArrayList&lt;&gt;();
    }

    public CustomTabView(Context context) {
        this(context, null);
    }


    /**
     * 添加自定义视图
     *
     * @param layoutResId
     * @return
     */
    public CustomTabView addTabView(int layoutResId) {
        View tempView = UiUtils.inflate(layoutResId);
        tempView.setTag(mTabViews.size());
        if (tempView == null) {
            return this;
        }
        tempView.setOnClickListener(new QiShuiClick(new OnClickListener() {
            @Override
            public void onClick(View view) {
                int position = (int) view.getTag();
                if (getLastPosition() == position) {
                    return;
                }
                mHistoryPosition.add(position);
                updateState(position);
            }
        }));
        mTabViews.add(tempView);
        //添加到容器里面
        addView(tempView);
        return this;
    }

    /**
     * 一次添加多个view
     *
     * @param layoutResId
     * @param num
     * @return
     */
    public CustomTabView addTabView(int layoutResId, int num) {
        if (num &lt;= 0) {
            return this;
        }
        //限制最大数量
        if (num &gt; 5) {
            num = 5;
        }

        for (int i = 0; i &lt; num; i++) {
            addTabView(layoutResId);
        }
        return this;
    }

    /**
     * 设置选中Tab
     *
     * @param curPosition
     */
    public void setCurrentItem(int curPosition) {

        if (curPosition &gt;= mTabViews.size()) {
            return;
        }
        View view = mTabViews.get(curPosition);
        if (view == null) {
            return;
        }
        mHistoryPosition.add(curPosition);

        //初始化属性
        if (mOnTabCheckListener != null) {
            mOnTabCheckListener.onSetTabAttrs(mTabViews);
        }
        boolean flag = view.performClick();
        if (flag) {
            updateState(curPosition);
        }

    }


    /**
     * 更新状态
     *
     * @param curPosition
     */
    private void updateState(int curPosition) {

        if (mTabViews == null) {
            return;
        }
        for (int position = 0; position &lt; mTabViews.size(); position++) {
            View view = mTabViews.get(position);
            if (mOnTabCheckListener != null &amp;&amp; curPosition == position) {
                mOnTabCheckListener.onTabSelected(view, curPosition);
            } else if (mOnTabCheckListener != null &amp;&amp; curPosition != position) {
                mOnTabCheckListener.onTabUnSelected(view, curPosition);
            }
        }
    }

    /**
     * 获取最后点击位置
     * @return
     */
    public int getLastPosition() {
        int position = 0;
        if (mHistoryPosition != null &amp;&amp; mHistoryPosition.size() &gt; 0) {
            position = mHistoryPosition.get(mHistoryPosition.size() - 1);
        }
        return position;
    }


    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        if (mTabViews != null) {
            mTabViews.clear();
        }
        if (mHistoryPosition != null) {
            mHistoryPosition.clear();
        }
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();
        // 调整每个Tab的大小
        int size = mTabViews.size();
        for (int i = 0; i &lt; size; i++) {
            View view = mTabViews.get(i);
            int width = getResources().getDisplayMetrics().widthPixels / size;
            LayoutParams params = new LayoutParams(width, ViewGroup.LayoutParams.MATCH_PARENT);
            params.gravity = Gravity.CENTER;
            view.setLayoutParams(params);
        }
    }
}
</code></pre><h2 id="轮播条-banner"><a href="#轮播条-banner" class="headerlink" title="轮播条 banner"></a>轮播条 banner</h2><p> 支持添加布局、ImageView滑动、自定义滑动样式</p>
<p>1、默认</p>
<pre><code>//数据
List&lt;Object&gt; list = new ArrayList&lt;&gt;();
list.add(R.drawable.banner);
list.add(R.drawable.banner);
list.add(R.drawable.banner);
bannerView.setUnSelectId(R.drawable.white_point)
.setSelectId(R.drawable.red_point).setLocationLeft()
.setListViews(list).setImageLoader(new BannerView.ImageLoader() {
    @Override
    public void show(Context context, Object obj, ImageView iv) {
        iv.setImageResource((Integer) obj);
    }
}).setBannerClick(new BannerView.BannerCallBack() {
    @Override
    public void click(View view, int position) {
        toast(&quot;QQQQQQQQQQQQQQQ&quot;);
    }
}).setAutoPlay(false).showView();
</code></pre><p>2、自定义</p>
<pre><code>//数据
List&lt;Integer&gt; list2 = new ArrayList&lt;&gt;();
list2.add(R.layout.state_data_empty);
list2.add(R.layout.state_data_error);

final List&lt;String&gt; listTitle = new ArrayList&lt;&gt;();
listTitle.add(&quot;康熙有多数老年人都存在的“不服输”的心理。虽然年龄摆在那儿了，但是仍然不承认自己力不从心&quot;);
listTitle.add(&quot;年迈的狮子是最敏感的&quot;);

//控件
bannerView2.setLoadView(R.layout.view_banner_1);
View bannerView = bannerView2.getBannerView();
ViewPager vp = UiUtils.findViewById(bannerView, R.id.banner_vp);
final TextView titleTv = UiUtils.findViewById(bannerView, R.id.banner_tv);
titleTv.setText(listTitle.get(0));
bannerView2.setViewPager(vp).setListResIds(list2)
.setDelayTime(3500).sePageChangeListenert(new BannerView.PageChangeListener() {
    @Override
    public void onPageSelected(int position) {
        titleTv.setText(listTitle.get(position));
    }
}).showView();
</code></pre><p>3、需要在生命周期时调用</p>
<pre><code>@Override
  protected void onStart() {
      super.onStart();
      if(bannerView!=null){
        bannerView.stratPlay();
      }
      if(bannerView2!=null){
        bannerView2.stratPlay();
      }

  }

  @Override
  protected void onStop() {
      super.onStop();
       if(bannerView!=null){
           bannerView.stopPlay();
       }
      if(bannerView!=null){
         bannerView2.stopPlay();
      }
  }
</code></pre><p>注释：更新时间：2019年1月15日17:24:10 </p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wexin.png" alt="七水 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="七水 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/utils/" rel="tag"># utils</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/23/人生感悟/" rel="next" title="人生感悟(转载)">
                <i class="fa fa-chevron-left"></i> 人生感悟(转载)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/02/23/music/" rel="prev" title="喜欢的音乐">
                喜欢的音乐 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="SOHUCS"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/qishui.jpg" alt="七水">
            
              <p class="site-author-name" itemprop="name">七水</p>
              <p class="site-description motion-element" itemprop="description">莫道君行早 更有早行人</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>


          



          <div class="links-of-author motion-element">
            
          </div>


          
          

          
          

          

        </div>
      </section>



      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用方式-最低api为17"><span class="nav-number">1.</span> <span class="nav-text">使用方式(最低api为17)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#请求权限-permisssion"><span class="nav-number">2.</span> <span class="nav-text">请求权限 permisssion</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#各种对话提示框框-dialog"><span class="nav-number">3.</span> <span class="nav-text">各种对话提示框框 dialog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PopupWindow"><span class="nav-number">4.</span> <span class="nav-text">PopupWindow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#http"><span class="nav-number">5.</span> <span class="nav-text">http</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cache"><span class="nav-number">6.</span> <span class="nav-text">cache</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ActivtyResultUtils-处理onActivityResult方法"><span class="nav-number">7.</span> <span class="nav-text">ActivtyResultUtils 处理onActivityResult方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TakePictureUtils-拍照及选取相册图片"><span class="nav-number">8.</span> <span class="nav-text">TakePictureUtils 拍照及选取相册图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MVP"><span class="nav-number">9.</span> <span class="nav-text">MVP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OnClickListener"><span class="nav-number">10.</span> <span class="nav-text">OnClickListener</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#annotation"><span class="nav-number">11.</span> <span class="nav-text">annotation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#页面布局切换-state"><span class="nav-number">12.</span> <span class="nav-text">页面布局切换 state</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主页面框架"><span class="nav-number">13.</span> <span class="nav-text">主页面框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#轮播条-banner"><span class="nav-number">14.</span> <span class="nav-text">轮播条 banner</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">七水</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  



  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>





  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("dMMmhdnJssUs5BAt2iEz21Hc-gzGzoHsz", "DUGbxFmv8YAeFzBvPxV1pQEl");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
